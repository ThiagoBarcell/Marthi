/* Sequenciador do armazenamento */
CREATE SEQUENCE GEN_CELL_ARMAZENAMENTO_ID;

/* Sequenciador das cores */
CREATE SEQUENCE GEN_CELL_CORES_ID;

/* Sequenciador das condições */
CREATE SEQUENCE GEN_CELL_CONDICOES_ID;

/* Sequenciador das Informações do cell */
CREATE SEQUENCE GEN_CELL_ITENS_ID

CREATE TABLE CELL_CONFIG (
    API_KEY_WHATSAPP  VARCHAR(255)
);

UPDATE CELL_CONFIG
SET
  API_KEY_WHATSAPP = '8404a52b-690a-422f-be65-3281d55ac4b9'
WHERE
  API_KEY_WHATSAPP IS NULL;

ALTER TABLE CELL_TP_PRECOS
ADD CONSTRAINT PK_CELL_TP_PRECOS
PRIMARY KEY (ID_TP_PRECO);

ALTER TABLE CELL_CONFIG
ADD CELL_RECEPTOR_WHATSAPP VARCHAR(20);

ALTER TABLE CELL_CONFIG
ADD SENHA_ACESSO VARCHAR(50);


CREATE GENERATOR GEN_CLIENTES_ID;

CREATE TABLE CLIENTES (
    ID                     INTEGER NOT NULL,
    NOME                   VARCHAR(255),
    TELEFONE               VARCHAR(25) NOT NULL,
    CPF                    VARCHAR(50),
    CELL_ID                INTEGER,
    DATA_HORA_SOLICITACAO  TIMESTAMP,
    DATA_HORA_CADASTRO     TIMESTAMP
);

ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES PRIMARY KEY (ID, TELEFONE);

CREATE OR ALTER TRIGGER CLIENTES_BI FOR CLIENTES
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.id is null) then
    new.id = gen_id(gen_clientes_id,1);
end;